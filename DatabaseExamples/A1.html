<!doctype html>
<html>
    <head>
        <title>Database Parsons Problem</title>
        <link href="../parsons.css" rel="stylesheet" />
        <link href="../lib/prettify.css" rel="stylesheet" />
        <script src="../lib/prettify.js"></script>
    </head>
    <body>
        <h2>A1 Database Parsons Problem</h2>
        <p>Construct a query by drag and dropping and reordering lines from the left to the right.</p>
        <p>List all information regarding stores in Helsinki and Tampere.</p>
        <div>
            <div>
              <h3>Table 1</h3>
              <img src="Pictures/A1.PNG" alt="Table 1">
            </div>
        </div>
        <div id="sortableTrash" class="sortable-code"></div>
        <div id="sortable" class="sortable-code"></div>
        <div style="clear:both;"></div>
        <p>
            <a href="#" id="newInstanceLink">New instance</a>
            <a href="#" id="feedbackLink">Check Solution</a>
            <a href="#" id="nextQuestion" style="float: right;">Next Question</a>
        </p>
        <script src="../lib/jquery.min.js"></script>
        <script src="../lib/jquery-ui.min.js"></script>
        <script src="../lib/jquery.ui.touch-punch.min.js"></script>
        <script src="../lib/underscore-min.js"></script>
        <script src="../lib/lis.js"></script>
        <script src="../parsons.js"></script>
        <script>
        var initial = 'SELECT *\n' +
                      'FROM store\n' +
                      "WHERE city IN ('Helsinki','Tampere');\n" +
                      'SELECT city #distractor\n' +
                      'SELECT street #distractor\n' +
                      "WHERE store IN ('Helsinki','Tampere') #distractor\n"+
                      "Extra other line"

        function displayErrors(fb) {
            if(fb.errors.length > 0) {
                alert(fb.errors[0]);
            }
        } 

        $(document).ready(function(){
            var parson = new ParsonsWidget({
                'sortableId': 'sortable',
                'trashId': 'sortableTrash',
                //Used to show amount of distractors shown at once
                'max_wrong_lines': 10,
                // Not adding 'displayErrors' will show a pop up with your error
                //'feedback_cb' : displayErrors,
                //Use to show either the first error or all the wrong lines
                'first_error_only': true,
                'incorrectSound': true,
                'colored_keyword': true
            });
            parson.init(initial);
            parson.shuffleLines();
            $("#newInstanceLink").click(function(event){
                event.preventDefault();
                parson.shuffleLines();
                var acc = document.getElementsByClassName("accordion");
                var i;
                console.log(acc.length)

                for (i = 0; i < acc.length; i++) {
                acc[i].addEventListener("click", function() {
                    /* Toggle between adding and removing the "active" class,
                    to highlight the button that controls the panel */
                    this.classList.toggle("active");

                    /* Toggle between hiding and showing the active panel */
                    var panel = this.nextElementSibling;
                    if (panel.style.display === "block") {
                    panel.style.display = "none";
                    } else {
                    panel.style.display = "block";
                    }
                });
                }
            });
            $("#feedbackLink").click(function(event){
                event.preventDefault();
                parson.getFeedback();
            });
            $("#nextQuestion").click(function(event){
                location.href='B6.html'
            });

            //Add Accordian Functionality
            var acc = document.getElementsByClassName("accordion");
            var i;
            console.log(acc.length)

            for (i = 0; i < acc.length; i++) {
            acc[i].addEventListener("click", function() {
                /* Toggle between adding and removing the "active" class,
                to highlight the button that controls the panel */
                this.classList.toggle("active");

                /* Toggle between hiding and showing the active panel */
                var panel = this.nextElementSibling;
                if (panel.style.display === "block") {
                panel.style.display = "none";
                } else {
                panel.style.display = "block";
                }
            });
            }
        });

        </script>
    </body>
</html>
